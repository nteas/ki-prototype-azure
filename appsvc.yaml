# Oryx build file for Python/React app
# See https://github.com/microsoft/Oryx/blob/main/docs/usage.md#python for more information

# Set the runtime stack to Python
language: python
pythonVersion: 3.11

# Install Python dependencies from the /app/backend directory
pip:
    - /app/backend/requirements.txt

# Build the React app
install:
    - cd app/frontend
    - npm install
    - npm run build

# Copy the React build files to the Python app's static directory
copy:
    - src: app/frontend/build
      dest: app/backend/static

# Start the Python app from the /app/backend directory
command: cd /app/backend && python app.py
