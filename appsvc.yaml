# appsvc.yaml file for Python/React app
# See https://docs.microsoft.com/en-us/azure/app-service/configure-language-python for more information

# Set the version of the appsvc.yaml file
version: 1

# Define the pre-build command to install Node.js and build the React app
pre-build: |
    cd app/frontend
    npm install n
    ./node_modules/.bin/n lts
    npm install
    npm run build

# Define the run command to start the Python app and serve the React app
run: |
    cd app/backend
    pip install -r requirements.txt
    python3 -m gunicorn main:app
